extends ../../../templates/navbar.pug

block content
  h2.title Ongoing Transactions
  hr
  .field.is-grouped
    p.control
      a.button.is-primary.is-inverted.is-outlined(class="button", href="/profile/-/transactions/1") ONGOING TRANSACTION
    p.control
      a.button.is-primary.is-inverted.is-outlined(class="button", href="/profile/-/transactions/hold/1") ON HOLD TRANSACTIONS
    p.control
      a.button.is-primary.is-inverted.is-outlined(class="button", href="/profile/-/transactions/history/1") PREVIOUS TRANSACTIONS
  hr
  each trans in transtab
    if trans.page == trans.curpage
      each viewer in viewertab
        if trans.strBuyerSNum == viewer.strSNum
          h3.title ( Buyer )
            a(href='/categories/'+ trans.strCatName + '/' + trans.intItemID ) &nbsp#{trans.strItemTitle}
          h3.subtitle &nbsp#{trans.strCatName}
          p
            b Price: Php #{trans.price}
          p Seller: &nbsp
            u
              a(href='/profile/'+ trans.strItemSNum ) #{trans.strName} ( #{trans.strItemSNum} )
          p Date Started: #{trans.date}
          br
          .field.is-grouped
            p.control
              a.button.is-primary.is-inverted.is-outlined(class="button", href="/profile/-/finishtrans/" + trans.intTransID) End Transaction
        else
          h3.title ( Seller )
            a(href='/categories/'+ trans.strCatName + '/' + trans.intItemID ) &nbsp#{trans.strItemTitle}
          h3.subtitle &nbsp#{trans.strCatName}
          p
            b Price: Php #{trans.price}
          p Buyer: &nbsp
            u
              a(href='/profile/'+ trans.strBuyerSNum ) #{trans.strName} ( #{trans.strBuyerSNum} )
          p Date Started: #{trans.date}
          br
          .field.is-grouped
            p.control
              a.button.is-primary.is-inverted.is-outlined(class="button", href="/profile/-/finishtrans/" + trans.intTransID) End Transaction
      hr
  each curpage in curpagetab
    .field.is-grouped
      if curpage > 1
        each prevpage in prevpagetab
          p.control
            a.button.is-primary.is-inverted.is-outlined.is-hovered(href='/profile/-/transactions/'+ prevpage ) << Previous
      each lastpage in lastpagetab
        each page in pagetab
          if page == curpage
            p.control
              a.button.is-primary.is-inverted.is-hovered() #{page}
          else
            if page <= lastpage
              p.control
                a.button.is-primary.is-inverted.is-outlined(href='/profile/-/transactions/'+ page ) #{page}
        each nextpage in nextpagetab
          if curpage < lastpage
            p.control
              a.button.is-primary.is-inverted.is-outlined.is-hovered(href='/profile/-/transactions/'+ nextpage ) Next >>
