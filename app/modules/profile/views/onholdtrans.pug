extends ../../../templates/navbar.pug

block content
  h2.title On Hold Transactions
  hr(style='border: 0.5px solid #990000')
  .field.is-grouped
    p.control
      a.button.is-danger(class="button", href="/profile/-/transactions/1") ONGOING TRANSACTION
    p.control
      a.button.is-danger(class="button", href="/profile/-/transactions/hold/1") ON HOLD TRANSACTIONS
    p.control
      a.button.is-danger(class="button", href="/profile/-/transactions/history/1") PREVIOUS TRANSACTIONS
  hr(style='border: 0.5px solid #990000')
  each trans in transtab
    if trans.page == trans.curpage
      each viewer in viewertab
        if trans.strBuyerSNum == viewer.strSNum
          if trans.strTransStatus == 'BFinished'
            h3.title ( Buyer )
              a(href='/categories/'+ trans.strCatName + '/' + trans.intItemID ) &nbsp#{trans.strItemTitle}
            h3.subtitle &nbsp#{trans.strCatName}
            p
              b Price: Php #{trans.price}
            p Seller: &nbsp
              u
                a(href='/profile/'+ trans.strItemSNum ) #{trans.strName} ( #{trans.strItemSNum} )
            p Date Started: #{trans.date}
            br
            p You Marked this as Finished Transaction
            .field.is-grouped
              p.control
                a.button.is-danger(class="button", href="/orderslip/" + trans.intTransID) Order Slip
          else
            h3.title ( Buyer )
              a(href='/categories/'+ trans.strCatName + '/' + trans.intItemID ) &nbsp#{trans.strItemTitle}
            h3.subtitle &nbsp#{trans.strCatName}
            p
              b Price: Php #{trans.price}
            p Seller: &nbsp
              u
                a(href='/profile/'+ trans.strItemSNum ) #{trans.strName} ( #{trans.strItemSNum} )
            p Date Started: #{trans.date}
            br
            p Seller Marked this as Finished Transaction
            if trans.strStatus == 'banned'
              p Seller Has Been banned by the Admin
            .field.is-grouped
              p.control
                a.button.is-danger(class="button", href="/orderslip/" + trans.intTransID) Order Slip
              p.control
                a.button.is-danger(class="button", href="/profile/-/confirmtrans/" + trans.intTransID) End Transaction

        else
          if trans.strTransStatus == 'SFinished'
            h3.title ( Seller )
              a(href='/categories/'+ trans.strCatName + '/' + trans.intItemID ) &nbsp#{trans.strItemTitle}
            h3.subtitle &nbsp#{trans.strCatName}
            p
              b Price: Php #{trans.price}
            p Buyer: &nbsp
              u
                a(href='/profile/'+ trans.strBuyerSNum ) #{trans.strName} ( #{trans.strBuyerSNum} )
            p Date Started: #{trans.date}
            br
            p You Marked this as Finished Transaction
            .field.is-grouped
              p.control
                a.button.is-danger(class="button", href="/orderslip/" + trans.intTransID) Order Slip
          else
            h3.title ( Seller )
              a(href='/categories/'+ trans.strCatName + '/' + trans.intItemID ) &nbsp#{trans.strItemTitle}
            h3.subtitle &nbsp#{trans.strCatName}
            p
              b Price: Php #{trans.price}
            p Buyer: &nbsp
              u
                a(href='/profile/'+ trans.strBuyerSNum ) #{trans.strName} ( #{trans.strBuyerSNum} )
            p Date Started: #{trans.date}
            br
            p Buyer Marked this as Finished Transaction
            if trans.strStatus == 'banned'
              p Seller Has Been banned by the Admin
            .field.is-grouped
              p.control
                a.button.is-danger(class="button", href="/orderslip/" + trans.intTransID) Order Slip
              p.control
                a.button.is-danger(class="button", href="/profile/-/confirmtrans/" + trans.intTransID) End Transaction


      hr(style='border: 0.5px solid #990000')
  each curpage in curpagetab
    .field.is-grouped
      if curpage > 1
        each prevpage in prevpagetab
          p.control
            a.button.is-danger.is-hovered(href='/profile/-/transactions/hold/'+ prevpage ) << Previous
      each lastpage in lastpagetab
        each page in pagetab
          if page == curpage
            p.control
              a.button.is-primary.is-inverted.is-hovered() #{page}
          else
            if page <= lastpage
              p.control
                a.button.is-danger(href='/profile/-/transactions/hold/'+ page ) #{page}
        each nextpage in nextpagetab
          if curpage < lastpage
            p.control
              a.button.is-danger.is-hovered(href='/profile/-/transactions/hold/'+ nextpage ) Next >>
